(function ($) {
  'use strict';

  function formSuccess() {
    submitMSG(true, 'Message submitted!');
  }

  function formError() {
    submitMSG(false, 'Did you fill in the form properly?');

    $('#contactForm')
      .removeClass()
      .addClass('shake animated')
      .one(
        'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',
        function () {
          $(this).removeClass();
        }
      );
  }

  function submitMSG(valid, msg) {
    const msgClasses = valid
      ? 'h5 text-left tada animated text-success'
      : 'h5 text-left text-danger';

    $('#msgSubmit')
      .removeClass()
      .addClass(msgClasses)
      .text(msg)
      .delay(3000)
      .queue(function () {
        $(this).text('');
        $(this).dequeue();
      });
  }

  setTimeout(() => {
    $('#contactForm')
      .validator()
      .on('submit', function (event) {
        if (event.isDefaultPrevented()) {
          formError();
        } else {
          event.preventDefault();
          formSuccess();
        }
      });
  }, 500);
})(jQuery);
